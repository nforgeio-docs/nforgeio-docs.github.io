"use strict";(self.webpackChunkneon_docs=self.webpackChunkneon_docs||[]).push([[6870],{7196:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>a,frontMatter:()=>i,metadata:()=>d,toc:()=>c});var t=n(4848),r=n(8453);n(4182),n(1801),n(3012),n(7227),n(9489);const i={sidebar_position:6,displayed_sidebar:"neonkube",title:"Kubelet Options",hide_title:!1,hide_table_of_contents:!0,description:"NeonKUBE Kubelet options",last_update:{author:"NeonFORGE Team"}},o="Kubelet Service Options",d={id:"neonkube/cluster-definition/kubelet-options",title:"Kubelet Options",description:"NeonKUBE Kubelet options",source:"@site/docs/neonkube/cluster-definition/kubelet-options.mdx",sourceDirName:"neonkube/cluster-definition",slug:"/neonkube/cluster-definition/kubelet-options",permalink:"/docs/neonkube/cluster-definition/kubelet-options",draft:!1,unlisted:!1,editUrl:"https://github.com/nforgeio/documentation/edit/master/docs/neonkube/cluster-definition/kubelet-options.mdx",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6,displayed_sidebar:"neonkube",title:"Kubelet Options",hide_title:!1,hide_table_of_contents:!0,description:"NeonKUBE Kubelet options",last_update:{author:"NeonFORGE Team"}},sidebar:"neonkube",previous:{title:"Job Options",permalink:"/docs/neonkube/cluster-definition/job-options"},next:{title:"Monitor Options",permalink:"/docs/neonkube/cluster-definition/monitor-options"}},l={},c=[];function h(e){const s={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{id:"kubelet-service-options",children:"Kubelet Service Options"}),"\n",(0,t.jsxs)(s.p,{children:["Every node in a Kubernetes cluster has a running ",(0,t.jsx)(s.strong,{children:"Kubelet Service"})," which is responsible for managing the containers\nscheduled to run on each node. These options let you customize some of the cluster-wide Kubelet settings."]}),"\n",(0,t.jsxs)(s.p,{children:["Here's what the Kubelet options look like, with the default values or ",(0,t.jsx)(s.strong,{children:"[required]"})," for properties that must be\nspecified:"]}),"\n","\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",children:"kubelet:\n  allowPodsOnControlPlane:                false\n  apiServer:\n    verbosity:                            2\n  evictionHard:                           [empty map]\n  featureGates:                           \n    EphemeralContainers:                  true\n  kubeReserved:                           [empty map]\n  maxPodsPerNode:                         250\n  shutdownGracePeriodCriticalPodsSeconds: 120\n  shutdownGracePeriodSeconds:             360\n  systemReserved:                         [empty map]\n"})}),"\n",(0,t.jsx)(s.admonition,{type:"note",children:(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"allowPodsOnControlPlane"})," defaults to ",(0,t.jsx)(s.strong,{children:"false"})," for cluster that have worker nodes or ",(0,t.jsx)(s.strong,{children:"true"})," for clusters with only\ncontrol-plane nodes (such as the desktop cluster)."]})}),"\n",(0,t.jsxs)("table",{children:[(0,t.jsxs)("thead",{children:[(0,t.jsx)("th",{children:"Property"}),(0,t.jsx)("th",{children:"Description"})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"allowPodsOnControlPlane"})}),(0,t.jsx)("td",{children:(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"bool:"})," Specifies whether Kubernetes will allow pods to be scheduled on control-plane\nnodes.  This defaults to ",(0,t.jsx)(s.strong,{children:"true"})," for clusters without worker nodes, ",(0,t.jsx)(s.strong,{children:"false"})," when\nworker nodes are present."]})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"apiServer"})}),(0,t.jsxs)("td",{children:[(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"object:"})," Specifies Kubernetes API Server options."]}),(0,t.jsxs)("table",{children:[(0,t.jsxs)("thead",{children:[(0,t.jsx)("th",{children:"Property"}),(0,t.jsx)("th",{children:"Description"})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"verbosity"})}),(0,t.jsxs)("td",{children:[(0,t.jsxs)(s.p,{children:["Specifies the Kubernetes API Server log verbosity.  This defaults to: ",(0,t.jsx)("b",{children:"2"})]}),(0,t.jsx)(s.p,{children:"Here are the supported verbosity values and what they do:"}),(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"1"})," - Log minimal details"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"2"})," - ",(0,t.jsx)(s.strong,{children:"(default)"})," Log useful steady state service status and significant changes to the system"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"3"})," - Log extended information about changes"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"4"})," - Log debug information"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"5"})," - ",(0,t.jsx)(s.em,{children:"Undefined"})]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"6"})," - Log requested resources"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"7"})," - Log HTTP request headers"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"8"})," - Log HTTP request contents"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"9"})," - Log HTTP request responses"]}),"\n"]})]})]})]})]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"evictionHard"})}),(0,t.jsxs)("td",{children:[(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"map:"})," Used to specify hard eviction thresholds that Kubelet will use to evict pods with our\na grace period.  See ",(0,t.jsx)(s.a,{href:"https://kubernetes.io/docs/concepts/scheduling-eviction/node-pressure-eviction/#hard-eviction-thresholds",children:"Hard eviction thresholds"}),"\nfor more information."]}),(0,t.jsxs)(s.p,{children:["This defaults to an ",(0,t.jsx)("b",{children:"empty map"})," to use the Kubernetes defaults."]})]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"featureGates"})}),(0,t.jsxs)("td",{children:[(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"map:"})," Enables or disables specific Kubernetes features.  This can be used to enable\nalpha quality or other features that are disabled by default for the Kubernetes\nversion being deployed or to disable features."]}),(0,t.jsxs)(s.p,{children:["This is a dictionary that maps feature names a boolean where ",(0,t.jsx)(s.strong,{children:"true"}),"\nenables the feature and ",(0,t.jsx)(s.strong,{children:"false"})," disables it.  Here's a description\nof the available ",(0,t.jsx)(s.a,{href:"https://kubernetes.io/docs/reference/command-line-tools-reference/feature-gates/#feature-gates",children:"Kubernetes Feature Gates"}),"."]}),(0,t.jsx)(s.p,{children:"NeonKUBE clusters enable specific features by default when you you haven't\nexplicitly disabled them via this property.  Note that some features may\nbe required and cannot be disabled.  Here are the feature gates enabled\nfor NeonKUBE clusters by default:"}),(0,t.jsxs)("table",{children:[(0,t.jsxs)("thead",{children:[(0,t.jsx)("th",{children:"Feature"}),(0,t.jsx)("th",{children:"Description"})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"EphemeralContainers"})}),(0,t.jsx)("td",{children:(0,t.jsx)(s.p,{children:"Enables the ability to add ephemeral containers to running pods.\nThis comes in handy for debugging running pods."})})]})]})]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"kubeReserved"})}),(0,t.jsxs)("td",{children:[(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"map:"})," Used to reserve system resources for Kubernetes related services.\nSee ",(0,t.jsx)(s.a,{href:"https://kubernetes.io/docs/tasks/administer-cluster/reserve-compute-resources/",children:"Reserve Compute Resources"}),"\nfor more information."]}),(0,t.jsxs)(s.p,{children:["This defaults to an ",(0,t.jsx)(s.strong,{children:"empty map"})," to use the Kubernetes defaults."]})]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"maxPodsPerNode"})}),(0,t.jsx)("td",{children:(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"integer:"})," Specifies the maximum number of Pods that can be scheduled on a node. This defaults to: ",(0,t.jsx)(s.strong,{children:"250"})]})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"shutdownGracePeriodCriticalPodsSeconds"})}),(0,t.jsx)("td",{children:(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"integer:"})," Specifies the seconds that Kubelet will delay node shutdown for critical pods.\nThis defaults to ",(0,t.jsx)(s.strong,{children:"120 seconds"})," and must be less than ",(0,t.jsx)(s.strong,{children:"shutdownGracePeriodSeconds"}),"\nand not less than ",(0,t.jsx)(s.strong,{children:"30 seconds"}),"."]})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"shutdownGracePeriodSeconds"})}),(0,t.jsx)("td",{children:(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"integer:"})," Specifies seconds Kubelet will delay node shutdown while gracefully terminating pods\non the node.  This is expressed in seconds and must be at least ",(0,t.jsx)(s.strong,{children:"30 seconds"}),".\nThis defaults to ",(0,t.jsx)(s.strong,{children:"360 seconds"}),"."]})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"systemReserved"})}),(0,t.jsxs)("td",{children:[(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"map:"})," Used to reserve system resources for Linux System related services.\nSee ",(0,t.jsx)("a",{href:"https://kubernetes.io/docs/tasks/administer-cluster/reserve-compute-resources/",children:"Reserve Compute Resources"}),"\nfor more information."]}),(0,t.jsxs)(s.p,{children:["This defaults to an ",(0,t.jsx)(s.strong,{children:"empty map"})," to use the Kubernetes defaults."]})]})]})]})]})}function a(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}}}]);