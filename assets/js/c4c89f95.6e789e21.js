"use strict";(self.webpackChunkneon_docs=self.webpackChunkneon_docs||[]).push([[9660],{7055:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>d,default:()=>a,frontMatter:()=>t,metadata:()=>c,toc:()=>o});var i=n(4848),r=n(8453);const t={sidebar_position:5,displayed_sidebar:"neonkube",title:"Cluster Definition",hide_title:!1,hide_table_of_contents:!1,description:"NeonKUBE cluster definition file format",keywords:["introduction"],last_update:{author:"NeonFORGE Team"}},d="Cluster Definition",c={id:"neonkube/cluster-definition/cluster-definition",title:"Cluster Definition",description:"NeonKUBE cluster definition file format",source:"@site/docs/neonkube/cluster-definition/cluster-definition.mdx",sourceDirName:"neonkube/cluster-definition",slug:"/neonkube/cluster-definition/",permalink:"/docs/neonkube/cluster-definition/",draft:!1,unlisted:!1,editUrl:"https://github.com/nforgeio/documentation/edit/master/docs/neonkube/cluster-definition/cluster-definition.mdx",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5,displayed_sidebar:"neonkube",title:"Cluster Definition",hide_title:!1,hide_table_of_contents:!1,description:"NeonKUBE cluster definition file format",keywords:["introduction"],last_update:{author:"NeonFORGE Team"}},sidebar:"neonkube",previous:{title:"Hello World Example",permalink:"/docs/neonkube/how-to-guides/hello-world"},next:{title:"Container Options",permalink:"/docs/neonkube/cluster-definition/container-options"}},l={},o=[];function h(e){const s={a:"a",code:"code",h1:"h1",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h1,{id:"cluster-definition",children:"Cluster Definition"}),"\n",(0,i.jsx)(s.p,{children:"This documentation section describes the cluster definition format in detail. Here's the top-level structure of a\ncluster definition:"}),"\n","\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-yaml",children:'ClusterDefinition:\n  annotations:  [map]\n  container:    {}\n  datacenter:   null\n  deployment:   {}\n  description:  null\n  features:     {}\n  hosting:      {}\n  isDesktop:    false\n  jobs:         {}\n  kubelet:      {}\n  latitude:     null\n  longitude:    null\n  monitor:      {}\n  name:         [required]\n  network:      {}\n  nodeOptions:  {}\n  nodes:        [map]\n  packageProxy: null\n  purpose:      "unspecified"\n  resourceTags: []\n  security:     {}\n  storage:      {}\n  timeSources:  ["pool.ntp.org"]\n'})}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsxs)("thead",{children:[(0,i.jsx)("th",{children:"Property"}),(0,i.jsx)("th",{children:"Description"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"annotations"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"map:"})," Optionally specifies cluster annotations.  Label names and values must follow the\n",(0,i.jsx)(s.a,{href:"https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/",children:"Kubernetes conventions"}),"\nand the ",(0,i.jsx)("b",{children:"neonkube.io/"})," prefix is reserved by NeonKUBE."]})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"container"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"object:"})," Customizes the cluster's container registry configuration."]})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"datacenter"})}),(0,i.jsxs)("td",{children:[(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"string:"})," Identifies the datacenter.  This defaults to empty string for on-premise clusters\nor the region for clusters deployed to the cloud."]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)("b",{children:"NOTE:"})," The name may include only letters, numbers, periods, dashes, and underscores."]})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"deployment"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"object:"})," Optionally used by ",(0,i.jsx)("b",{children:"ClusterFixture"})," and possibly custom tools for customizing\ncluster and node names to avoid conflicts."]})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"description"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"string:"})," Optionally describes the cluster for humans.  This may be a string up to 256 characters long."]})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"features"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"object:"})," Specifies optional features to be installed in the cluster."]})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"hosting"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"object:"})," Specifies hosting related settings (e.g. the cloud provider).  This defaults to\n",(0,i.jsx)(s.code,{children:"null"})," indicating that the cluster will be hosted on private servers."]})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"isDesktop"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"bool:"})," Indicates that the definition describes a NeonDESKTOP cluster.  This is set to ",(0,i.jsx)(s.code,{children:"true"}),"\nby NeonDESKTOP when it deploys a desktop cluster and isn't typically set by cluster operators."]})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"jobs"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"object:"})," Specifies the schedules for cluster jobs."]})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"kubernetes"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"object:"})," Specifies Kubernetes cluster options."]})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"latitude"})}),(0,i.jsxs)("td",{children:[(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"decimal:"})," Optionally specifies the latitude of the cluster location.  This is a value\nbetween -90 and +90 degrees."]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)("b",{children:"NOTE:"})," ",(0,i.jsx)("b",{children:"Latitude"})," and ",(0,i.jsx)("b",{children:"Longitude"})," must both be specified together or\nnot at all."]})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"longitude"})}),(0,i.jsxs)("td",{children:[(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"decimal:"})," Optionally specifies the longitude of the cluster location.  This is a value\nbetween -180 and +180 degrees."]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)("b",{children:"NOTE:"})," ",(0,i.jsx)("b",{children:"Latitude"})," and ",(0,i.jsx)("b",{children:"Longitude"})," must both be specified together or\nnot at all."]})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"monitor"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"object:"})," Specifies options for the cluster integrated monitoring stack."]})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"name"})}),(0,i.jsxs)("td",{children:[(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"string:"})," Specifies the cluster name."]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)("b",{children:"NOTE:"}),"\nNames may include only letters, numbers, periods, dashes, and underscores and\nmay be up to 24 characters long.  Some hosting environments enforce length limits\non resource names that we derive from the cluster name, so please limit your\ncluster name to 24 characters."]})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"network"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"object:"})," Describes the cluster's network configuration."]})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"nodeOptions"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"object:"})," Specifies host node options, including Linux package manager settings."]})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"nodes"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"map:"})," Describes the cluster nodes."]})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"packageProxy"})}),(0,i.jsxs)("td",{children:[(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"string:"})," Optionally specifies one or more APT proxy/cache servers the cluster will use to install\nand update Linux packages.  These are endpoints like ",(0,i.jsxs)("b",{children:["HOSTNAME",":PORT"]})," or ",(0,i.jsx)("b",{children:"ADDRESS.PORT"}),"\nof a ",(0,i.jsx)("b",{children:"apt-cacher-ng"})," or other package proxy server.  The port is generally set to ",(0,i.jsx)("b",{children:"3142"}),"\nMultiple proxies may be specified by separating them with spaces.  This defaults to\nreferencing the ",(0,i.jsx)("b",{children:"apt-cacher-ng"})," instances running on the control-plane nodes."]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)("b",{children:"NOTE:"}),"\nThe cluster nodes are configured to failover to different proxies or to hit the\ndefault Linux distribution package mirror directly if any or all of the caches\nspecified are unavailable."]}),(0,i.jsx)(s.p,{children:"The package caches will be tried in the order they are listed.  This essentially\nmakes the first cache primary, with the others acting as backups."})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"purpose"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"string:"})," Describes how the cluster is being used.  Supported values are: ",(0,i.jsx)("b",{children:"unspecified"}),",\n",(0,i.jsx)("b",{children:"development"}),", ",(0,i.jsx)("b",{children:"production"}),", ",(0,i.jsx)("b",{children:"stage"}),", and ",(0,i.jsx)("b",{children:"test"})]})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"resourceTags"})}),(0,i.jsxs)("td",{children:[(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"array:"})," Optionally specifies custom tags that will be attached to cluster resources in cloud\nhosting environments.  These tags are intended to help you manage your cloud resources\nas well as help organize your cost reporting."]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)("b",{children:"NOTE:"})," Currently, this is only supported for clusters deployed to AWS and Azure."]})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"security"})}),(0,i.jsxs)("td",{children:[(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"object:"})," Specifies cluster security options."]}),(0,i.jsxs)("table",{children:[(0,i.jsxs)("thead",{children:[(0,i.jsx)("th",{children:"Property"}),(0,i.jsx)("th",{children:"Description"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"passwordLength"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"integer:"})," cluster nodes are configured with a cryptographically random root account password.\nThis defaults to ",(0,i.jsx)(s.strong,{children:"20"})," characters.  The minumum length is ",(0,i.jsx)(s.strong,{children:"8"}),"."]})})]})]})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"storage"})}),(0,i.jsxs)("td",{children:[(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"object:"})," Specifies cluster storage related options for ",(0,i.jsx)(s.strong,{children:"Minio"})," and ",(0,i.jsx)(s.strong,{children:"OPenEBS"}),"."]}),(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-yaml",children:'storage:\n  minio:\n    volumesPerNode: 4\n    volumeSize:     "2 GiB"\n  openEbs:\n    engine:         "default"\n    nfsSize:        "10 GiB"\n'})}),(0,i.jsxs)("table",{children:[(0,i.jsxs)("thead",{children:[(0,i.jsx)("th",{children:"Property>"}),(0,i.jsx)("th",{children:"Description>"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)(s.strong,{children:"storage.minio.volumesPerNode"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:["Specifies the number of volumes per server. This defaults to ",(0,i.jsx)(s.strong,{children:"4"}),"."]})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)(s.strong,{children:"storage.minio.volumeSize"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:["The size of each volume to be mounted to each server.  This defaults\nto ",(0,i.jsx)(s.strong,{children:"2 GiB"}),"."]})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)(s.strong,{children:"storage.openEbs.engine"})}),(0,i.jsxs)("td",{children:[(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"string:"})," Specifies which OpenEBS engine will be deployed within the cluster.\nSupported values are ",(0,i.jsx)(s.strong,{children:"default"}),", ",(0,i.jsx)(s.strong,{children:"hostpath"}),", ",(0,i.jsx)(s.strong,{children:"cstor"}),", ",(0,i.jsx)(s.strong,{children:"jiva"}),", or\n",(0,i.jsx)(s.strong,{children:"mayastor"}),"."]}),(0,i.jsxs)(s.p,{children:["This defaults to ",(0,i.jsx)(s.strong,{children:"default"})," where NeonKUBE will try to choose a reasonable\nstorage engine for your cluster.  Currently, this selects ",(0,i.jsx)(s.strong,{children:"hostpath"})," for\nsingle-node clusters or ",(0,i.jsx)(s.strong,{children:"jiva"})," for multi-node clusters."]})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)(s.strong,{children:"storage.openEbs.nfsSize"})}),(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"string:"})," Specifies the size of the NFS file system to be created for the cluster.\nThis defaults to ",(0,i.jsx)(s.strong,{children:"10 GiB"})," and cannot be any smaller."]})})]})]})]})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsx)("b",{children:"timeSources"})}),(0,i.jsxs)("td",{children:[(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"array:"})," Specifies the NTP time sources to be configured for the cluster.  These are the\nFQDNs or IP addresses of the sources.  This defaults to ",(0,i.jsx)("b",{children:"pool.ntp.org"}),"."]}),(0,i.jsx)(s.p,{children:"The cluster control-plane nodes will be configured to synchronize their time with these\ntime sources and the worker nodes will be configured to synchronize their time\nwith the control-plane nodes."})]})]})]})]})}function a(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);