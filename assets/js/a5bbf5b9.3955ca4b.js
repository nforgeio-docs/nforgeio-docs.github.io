"use strict";(self.webpackChunkneon_docs=self.webpackChunkneon_docs||[]).push([[4285],{9302:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>a});var t=s(4848),i=s(8453);s(4182),s(1801),s(3012),s(7227),s(9489);const r={sidebar_position:1,displayed_sidebar:"neonkube",title:"AWS",hide_title:!1,hide_table_of_contents:!0,description:"AWS hosting options",last_update:{author:"NeonFORGE Team"}},o="AWS Hosting Options",l={id:"neonkube/cluster-definition/hosting-options/aws-hosting-options",title:"AWS",description:"AWS hosting options",source:"@site/docs/neonkube/cluster-definition/hosting-options/aws-hosting-options.mdx",sourceDirName:"neonkube/cluster-definition/hosting-options",slug:"/neonkube/cluster-definition/hosting-options/aws-hosting-options",permalink:"/docs/neonkube/cluster-definition/hosting-options/aws-hosting-options",draft:!1,unlisted:!1,editUrl:"https://github.com/nforgeio/documentation/edit/master/docs/neonkube/cluster-definition/hosting-options/aws-hosting-options.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,displayed_sidebar:"neonkube",title:"AWS",hide_title:!1,hide_table_of_contents:!0,description:"AWS hosting options",last_update:{author:"NeonFORGE Team"}},sidebar:"neonkube",previous:{title:"Hosting Options",permalink:"/docs/neonkube/cluster-definition/hosting-options/"},next:{title:"Azure",permalink:"/docs/neonkube/cluster-definition/hosting-options/azure-hosting-options"}},d={},a=[];function c(e){const n={code:"code",h1:"h1",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"aws-hosting-options",children:"AWS Hosting Options"}),"\n",(0,t.jsxs)(n.p,{children:["Here's what the AWS related hosting options looks like, with the default values or ",(0,t.jsx)(n.strong,{children:"[required]"})," for property values\nthat must be specified:"]}),"\n","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'hosting:\n  environment: aws\n  aws:\n    accessKeyId:                     [required]\n    availabilityZone:                [required]\n    controlPlanePlacementPartitions: -1\n    defaultInstanceType:             c5.2xlarge\n    defaultEbsOptimized:             false\n    defaultVolumeSize:               "128 GiB"\n    defaultVolumeType:               gp2\n    defaultOpenEbsVolumeSize:        "128 GiB"\n    defaultOpenEbsVolumeType:        gp2\n    network:\n      elasticIpEgressId:             null\n      elasticIpIngressId:            null\n      vpcSubnet:                     "10.100.0.0/16"\n      nodeSubnet:                    "10.100.0.0/24"\n      publicSubnet:                  "10.100.255.0/24"\n    resourceGroup:                   null\n    secretAccessKey:                 [required]\n    workerPlacementPartitions:       1\n'})}),"\n",(0,t.jsxs)("table",{children:[(0,t.jsxs)("thead",{children:[(0,t.jsx)("th",{children:"Property"}),(0,t.jsx)("th",{children:"Description"})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"accessKeyId"})}),(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"string:"})," Specifies the AWS access key ID that identifies the IAM key created\nfor the IAM user assigned to NeonKUBE for management activities, including creating\nthe cluster.  This combined with ",(0,t.jsx)("b",{children:"SecretAccessKey"})," will be used to confirm the\nidentity.  This is required."]})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"availabilityZone"})}),(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"string:"})," Specifies the AWS zone where the cluster will be provisioned.  This is required."]})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"controlPlanePlacementPartitions"})}),(0,t.jsxs)("td",{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"integer:"})," Specifies the number of control-plane placement group partitions the cluster\ncontrol-plane node instances will be deployed to.  This defaults to ",(0,t.jsx)("b",{children:"-1"})," which means\nthat the number  of partitions will equal the number of control-plane nodes.  AWS supports\na maximum of 7 placement partitions."]}),(0,t.jsxs)(n.p,{children:["AWS provides three different types of ",(0,t.jsx)("b",{children:"placement groups"})," to user help manage\nwhere virtual machine instances are provisioned within an AWS availability zone\nto customize fault tolerance due to AWS hardware failures:\n",(0,t.jsx)("a",{href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/placement-groups.html",children:"AWS Placement groups"})]}),(0,t.jsxs)(n.p,{children:["NeonKUBE provisions instances using two ",(0,t.jsx)("b",{children:"partition placement groups"}),", one for\nthe cluster control-plane nodes and the other for the workers.  The idea is that control-plane\nnodes should be deployed on separate hardware for fault tolerance because if the\nmajority of control-plane nodes go offline, the entire cluster will be dramatically impacted.\nIn general, the number of ",(0,t.jsx)("b",{children:"controlPlanePlacementPartitions"})," partitions should\nequal the number of control-plane nodes."]}),(0,t.jsxs)(n.p,{children:["Worker nodes are distributed across ",(0,t.jsx)("b",{children:"workerPlacementPartitions"})," partitions\nin a separate placement group.  The number of worker partitions defaults to 1, potentially\nlimiting the resilience to AWS hardware failures while making it more likely that AWS\nwill be able to actually satisfy the conditions to provision the cluster node instances."]}),(0,t.jsx)(n.p,{children:"Unfortunately, AWS may not have enough distinct hardware available to satisfy\nyour requirements.  In this case, we recommend that you try another availability\nzone first and if that doesn't work try reducing the number of partitions which\ncan be as low as 1 partition."})]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"defaultInstanceType"})}),(0,t.jsxs)("td",{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"string:"})," Identifies the default AWS instance type to be provisioned for cluster nodes that don't\nspecify an instance type.  This defaults to ",(0,t.jsx)("b",{children:"c5.2xlarge"})," which includes 8 virtual cores and\n16 GiB RAM but can be overridden for specific cluster nodes."]}),(0,t.jsxs)(n.p,{children:[(0,t.jsx)("b",{children:"NOTE:"})," NeonKUBE clusters cannot be deployed to ARM-based AWS instance types.  You must\nspecify an instance type using a Intel or AMD 64-bit processor."]}),(0,t.jsxs)(n.p,{children:[(0,t.jsx)("b",{children:"NOTE:"})," NeonKUBE requires control-plane and worker instances to have at least 4 CPUs and 8GiB RAM.  Choose\nan AWS instance type that satisfies these requirements."]})]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"defaultEbsOptimized"})}),(0,t.jsxs)("td",{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"bool:"})," Specifies whether the cluster instances should be EBS-optimized by default.\nThis defaults to ",(0,t.jsx)("b",{children:"false"})," and can be overidden for specific cluster nodes.\nSee this for more information: ",(0,t.jsx)("a",{href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-optimized.html",children:"Amazon EBS\ufffdoptimized instances"})]}),(0,t.jsx)(n.p,{children:"Non EBS optimized instances perform disk operation I/O to EBS volumes using the same\nnetwork used for other network operations.  This means that you may see some disk\nperformance issues when your instance is busy serving web traffic or running\ndatabase queries, etc."}),(0,t.jsx)(n.p,{children:"EBS optimization can be enabled for some instance types.  This provisions extra dedicated\nnetwork bandwidth exclusively for EBS I/O.  Exactly how this works, depends on the specific\nVM type."}),(0,t.jsx)(n.p,{children:"More modern AWS VM types enable EBS optimization by default and you won't incur any\nadditional charges for these instances and disabling EBS optimization won't have any\neffect."}),(0,t.jsx)(n.p,{children:"Some AWS instance types can be optimized but this is disabled by default.  When you\nenable this, you'll probably an additional AWS hourly fee for these instances."}),(0,t.jsx)(n.p,{children:"Some AWS instance types don't support EBS optimization.  You'll need to be sure that\nthis is disabled for those nodes."})]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"defaultVolumeSize"})}),(0,t.jsxs)("td",{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"string:"})," Specifies the default AWS volume size for the cluster node primary disks.\nThis defaults to ",(0,t.jsx)("b",{children:"128 GiB"})," but can be overridden for specific cluster nodes."]}),(0,t.jsxs)(n.p,{children:[(0,t.jsx)("b",{children:"NOTE:"})," Node disks smaller than 32 GiB are not supported by NeonKUBE.  We'll\nautomatically round up the disk size when necessary."]})]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"defaultVolumeType"})}),(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"string:"})," Specifies the default AWS volume type for cluster node primary disks.  This defaults\nto ",(0,t.jsx)("b",{children:"gp2"})," which is SSD based and offers a reasonable compromise between performance and cost.\nThis can be overriden for specific cluster nodes."]})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"defaultOpenEbsVolumeSize"})}),(0,t.jsxs)("td",{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"string:"})," Specifies the default AWS volume size to be used when creating\nOpenEBS cStor disks.  This defaults to ",(0,t.jsx)("b",{children:"128 GiB"})," but can be overridden\nfor specific cluster nodes."]}),(0,t.jsxs)(n.p,{children:[(0,t.jsx)("b",{children:"NOTE:"})," Node disks smaller than 32 GiB are not supported by NeonKUBE.\nWe'll automatically round up the disk size when necessary."]})]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"defaultOpenEbsVolumeType"})}),(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"string:"})," Specifies the default AWS volume type to use for OpenEBS cStor disks.  This defaults\nto ",(0,t.jsx)("b",{children:"gp2"})," which is SSD based and offers a reasonable compromise between performance and cost.\nThis can be overridden for specific cluster nodes."]})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"network"})}),(0,t.jsxs)("td",{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"object:"})," Specifies the AWS related cluster network options."]}),(0,t.jsxs)("table",{children:[(0,t.jsxs)("thead",{children:[(0,t.jsx)("th",{children:"Property"}),(0,t.jsx)("th",{children:"Description"})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"elasticIpEgressId"})}),(0,t.jsxs)("td",{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"string:"})," Optionally specifies an existing Elastic IP address to be used by the cluster\nload balancer for receiving network traffic.  Set this to your Elastic IP allocation ID\n(something like ",(0,t.jsx)("b",{children:"eipalloc-080a1efa9c04ad72"}),").  This is useful for ensuring that your\ncluster is always provisioned with a known static IP."]}),(0,t.jsxs)(n.p,{children:[(0,t.jsx)("b",{children:"NOTE:"})," When this isn't specified, the cluster will be configured with new Elastic IPs\nthat will be released when the cluster is deleted."]}),(0,t.jsxs)(n.p,{children:[(0,t.jsx)("b",{children:"NOTE:"})," ",(0,t.jsx)("b",{children:"elasticIpIngressId"})," and ",(0,t.jsx)("b",{children:"ElasticIpEgressId"})," must be specified\ntogether or not at all."]})]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"elasticIpIngressId"})}),(0,t.jsxs)("td",{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"string:"})," Optionally specifies an existing Elastic IP address to be used by the cluster\nload balancer for sending network traffic.  Set this to your Elastic IP allocation ID\n(something like ",(0,t.jsx)("b",{children:"eipalloc-080a1efa9c04ad88"}),").  This is useful for ensuring that your\ncluster is always provisioned with a known static IP."]}),(0,t.jsxs)(n.p,{children:[(0,t.jsx)("b",{children:"NOTE:"})," When this isn't specified, the cluster will be configured with new Elastic IPs\nthat will be released when the cluster is deleted."]}),(0,t.jsxs)(n.p,{children:[(0,t.jsx)("b",{children:"NOTE:"})," ",(0,t.jsx)("b",{children:"elasticIpIngressId"})," and ",(0,t.jsx)("b",{children:"ElasticIpEgressId"})," must be specified\ntogether or not at all."]})]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"vpcSubnet"})}),(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"string:"})," Specifies the subnet CIDR to used for AWS VPC (virtual private cloud) provisioned\nfor the cluster.  This must surround the ",(0,t.jsx)("b",{children:"nodeSubnet"})," and ",(0,t.jsx)("b",{children:"publicSubnet"})," subnets.\nThis defaults to ",(0,t.jsx)("b",{children:"10.100.0.0/16"}),"."]})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"privateSubnet"})}),(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"string:"})," Specifies the private subnet CIDR within ",(0,t.jsx)("b",{children:"vpcSubnet"})," ",(0,t.jsx)("see",{cref:""})," for the private subnet\nwhere the cluster node instances will be provisioned.  This defaults to ",(0,t.jsx)("b",{children:"10.100.0.0/24"}),"."]})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"publicSubnet"})}),(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"string:"})," Specifies the public subnet CIDR within ",(0,t.jsx)("b",{children:"vpcSubnet"})," for the public subnet where\nthe AWS network load balancer will be provisioned to manage inbound cluster traffic.  This defaults\nto ",(0,t.jsx)("b",{children:"10.100.255.0/16"}),"."]})})]})]})]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"resourceGroup"})}),(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"string:"}),' Specifies the AWS resource group where all cluster components are to be provisioned.\nThis defaults to "neon-" plus the cluster name but can be customized as required.']})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"secretAccessKey"})}),(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"string:"})," Specifies the AWS secret used to authenticate the ",(0,t.jsx)("b",{children:"AccessKeyId"}),".\nThis is required."]})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("b",{children:"workerPlacementPartitions"})}),(0,t.jsxs)("td",{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"integer:"})," Specifies the number of worker placement group partitions the cluster\nworker node instances will be deployed to.  This defaults to ",(0,t.jsx)("b",{children:"1"})," trading off\nresilience to hardware failures against increasing the chance that AWS will actually\nbe able to provision the cluster nodes.  AWS supports a maximum of 7 placement partitions."]}),(0,t.jsxs)(n.p,{children:["AWS provides three different types of ",(0,t.jsx)("b",{children:"placement groups"})," to user help manage\nwhere virtual machine instances are provisioned within an AWS availability zone\nto customize fault tolerance due to AWS hardware failures.  See:\n",(0,t.jsx)("a",{href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/placement-groups.html",children:"AWS Placement groups"})]}),(0,t.jsxs)(n.p,{children:["NeonKUBE provisions instances using two ",(0,t.jsx)("b",{children:"partition placement groups"}),", one for\nthe cluster control-plane nodes and the other for the workers.  The idea is that control-plane\nnodes should be deployed on separate hardware for fault tolerance because if the\nmajority of control-plane nodes go offline, the entire cluster will be dramatically impacted.\nIn general, the number of ",(0,t.jsx)("b",{children:"c>ontrolPlanePlacementPartitions"})," partitions should\nequal the number of control-plane nodes."]}),(0,t.jsxs)(n.p,{children:["Worker nodes are distributed across see ",(0,t.jsx)("b",{children:"WorkerPlacementPartitions"})," partitions\nin a separate placement group.  The number of worker partitions defaults to 1, potentially\nlimiting the resilience to AWS hardware failures while making it more likely that AWS\nwill be able to actually satisfy the conditions to provision the cluster node instances."]}),(0,t.jsx)(n.p,{children:"Unfortunately, AWS may not have enough distinct hardware available to satisfy\nyour requirements.  In this case, we recommend that you try another availability\nzone first and if that doesn't work try reducing the number of partitions which\ncan be as low as 1 partition."})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);